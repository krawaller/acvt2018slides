<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>jQuery</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="icon" type="image/x-icon" href="mc2/images/favicon.ico">

    <link rel="stylesheet" href="mc2/styles/reveal.css">
    <link rel="stylesheet" href="mc2/styles/theme.css" id="theme">
    <link rel="stylesheet" href="mc2/styles/code.css">
    <!--STARTCOURSESPECIFICSTYLES--><link rel="stylesheet" href="styles/cssdemo.css">
<link rel="stylesheet" href="styles/sectiontypes.css">
<link rel="stylesheet" href="styles/style.css"><!--ENDCOURSESPECIFICSTYLES-->

    
  </head>

  <body>
    <div id="pos"></div>
    <div class="reveal">
      <div class="slides">
        <section class="slide chaptertitle">
          <div class="slidecontent">
            <div class="chapternumber"> chapter 7 of 11 </div>
            <h1>jQuery</h1>
            <span>God&#39;s gift to <span style='text-decoration: line-through;'>women</span> the Web</span>
          </div>
        </section>
        
        <!--STARTSECTIONINDEX--><section class="slide sectionlist">
  <div class="slidecontent">
    <h3>Sections in this chapter</h3>
    <ol>
    <li><a href="#/3">jQuery&nbsp;intro</a></li>
<li><a href="#/4">jQuery&nbsp;refresher</a></li>
<li><a href="#/5">Exercise&nbsp;&#8209;&nbsp;jQuery</a></li>
<li><a href="#/6">Event&nbsp;delegation</a></li>
<li><a href="#/7">Exercise&nbsp;&#8209;&nbsp;ToDo&nbsp;app</a></li>
    </ol>
  </div>
</section>
<!--ENDSECTIONINDEX-->
        <!--STARTCHAPTERCONTENT--><!--STARTSECTION1--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 1/5</div>
      <h3>jQuery intro</h3>
      <p>What is the fuss about?</p>
    </div>
  </section>
  <section class="slide" data-pos="7-1-1">
<span class="pos">7-1-1</span>
<div class="slidecontent"><div class="learn"></div>

<p>Understanding what jQuery is</p>
</div></section><section class="slide" data-pos="7-1-2">
<span class="pos">7-1-2</span>
<div class="slidecontent"><p>As life on Earth is based on carbon, so is the <strong>internet based on jQuery</strong>.</p>
<p><img src="resources/images/jquery.png" alt=""></p>
</div></section><section class="slide" data-pos="7-1-3">
<span class="pos">7-1-3</span>
<div class="slidecontent"><p>The library functionality is <strong>exposed through a global <code>jQuery</code> object</strong> created when we run the code. It <strong>also has <code>$</code> alias</strong> if you want to be more succinct.</p>
<pre><code class="lang-javascript">jQuery === $ <span class="hljs-comment">// true</span>
</code></pre>
</div></section><section class="slide list" data-pos="7-1-4">
<span class="pos">7-1-4</span>
<div class="slidecontent">
<p>jQuery achieved its popularity through <strong>four good ideas</strong>:</p>
<ul>
<li><span>a</span>use <strong>CSS selectors</strong></li>
<li><span>b</span>present a <strong>unified and simplified façade</strong></li>
<li><span>c</span>have <strong>implicit element looping</strong></li>
<li><span>d</span>use <strong>method chaining</strong></li>
</ul>
<p>We&#39;ll now talk through them one by one!</p>
</div></section><section class="slide num numA" data-pos="7-1-5">
<span class="pos">7-1-5</span>
<div class="slidecontent">
<p>First off, <strong>using CSS selectors to match elements</strong>.</p>
<pre><code><span class="hljs-attribute">let firstParagraph</span> = $(<span class="hljs-string">"p:first-child"</span>);
</code></pre><p>The success of this idea was what <strong>caused <code>querySelector(All)</code> to be added to regular JavaScript</strong>.</p>
</div></section><section class="slide num numB" data-pos="7-1-6">
<span class="pos">7-1-6</span>
<div class="slidecontent">
<p>Second, the <strong>façade</strong> - jQuery made <strong>better methods to interact with the DOM</strong>, and ensures that they <strong>work the same in all browsers</strong>:</p>
<pre><code>firstParagraph.addClass(<span class="hljs-string">"fadeanim"</span>)<span class="hljs-comment">;</span>
</code></pre><p>(because earlier, node.classList didn&#39;t exist!)</p>
</div></section><section class="slide" data-pos="7-1-7">
<span class="pos">7-1-7</span>
<div class="slidecontent"><p>The <strong>jQuery façade has less value now</strong> since</p>
<ul>
<li><strong>browsers are much more standards compliant</strong></li>
<li><strong>the DOM has been much improved</strong></li>
</ul>
<p>But it is <strong>still pretty nice</strong>!</p>
</div></section><section class="slide num numC" data-pos="7-1-8">
<span class="pos">7-1-8</span>
<div class="slidecontent">
<p>Third, <strong>implicit looping</strong> - if a jQuery selection catches multiple elements, we can still <strong>act on all elements</strong> with a single method call:</p>
<pre><code><span class="hljs-keyword">let</span> buttons = $(<span class="hljs-string">"button"</span>);
buttons.attr(<span class="hljs-string">"disabled"</span>,<span class="hljs-literal">true</span>);
</code></pre></div></section><section class="slide" data-pos="7-1-9">
<span class="pos">7-1-9</span>
<div class="slidecontent"><p>Some methods <strong>make no sense to use on many elements</strong> at once - they will <strong>operate on the first element</strong> in the selection.</p>
</div></section><section class="slide num numD" data-pos="7-1-10">
<span class="pos">7-1-10</span>
<div class="slidecontent">
<p>Finally, <strong>chaining</strong>. Almost all jQuery methods <strong>return the selection we were working on</strong>. </p>
<p>That means that instead of doing this...</p>
<pre><code><span class="hljs-keyword">let</span> buttons = $(<span class="hljs-string">"button"</span>);
buttons.attr(<span class="hljs-string">"disabled"</span>,<span class="hljs-literal">true</span>);
buttons.addClass(<span class="hljs-string">"blocked"</span>)
</code></pre></div></section><section class="slide" data-pos="7-1-11">
<span class="pos">7-1-11</span>
<div class="slidecontent"><p>...we can do this:</p>
<pre><code><span class="hljs-meta">$</span><span class="bash">(<span class="hljs-string">"button"</span>).attr(<span class="hljs-string">"disabled"</span>,<span class="hljs-literal">true</span>).addClass(<span class="hljs-string">"blocked"</span>);</span>
</code></pre></div></section><section class="slide" data-pos="7-1-12">
<span class="pos">7-1-12</span>
<div class="slidecontent"><p>Although <strong>the need for jQuery has diminished</strong>, it is still very popular.</p>
<p>And as its API is rather easy, using jQuery can be a better way to learn the DOM than the DOM itself!</p>
</div></section><section class="slide" data-pos="7-1-13">
<span class="pos">7-1-13</span>
<div class="slidecontent"><p>So: definitely <strong>learn jQuery</strong>, but make sure to <strong>also understand what is actually going on</strong>. </p>
<p>Practice from time to time to <strong>do it without jQuery</strong>.</p>
<p>Peolpe&#39;s frequent inability regarding this has given rise to a <strong>special kind of humor</strong>:</p>
</div></section><section class="slide question" data-pos="7-1-14">
<span class="pos">7-1-14</span>
<div class="slidecontent">
<p><img src="resources/images/jqueryquestion.png"/></p>
</div></section><section class="slide answer" data-pos="7-1-15">
<span class="pos">7-1-15</span>
<div class="slidecontent">
<p><img src="resources/images/jqueryanswer.png"/></p>
</div></section><section class="slide" data-pos="7-1-16">
<span class="pos">7-1-16</span>
<div class="slidecontent"><p><img src="resources/images/jqueryanswer2.png"/></p>
</div></section><section class="slide" data-pos="7-1-17">
<span class="pos">7-1-17</span>
<div class="slidecontent"><p><img src="resources/images/jqueryanswer3.png"/></p>
</div></section><section class="slide" data-pos="7-1-18">
<span class="pos">7-1-18</span>
<div class="slidecontent"><p>Ending by <strong>zooming out</strong>; this is what you&#39;ll be doing with jQuery most of the time:</p>
<pre><code>$<span class="hljs-comment">(someSelector)</span>.someMethod<span class="hljs-comment">()</span>;
</code></pre><p>We </p>
<ul>
<li><strong>select some elements</strong>, and</li>
<li><strong>do something with them</strong></li>
</ul>
</div></section>
</section>
<!--ENDSECTION1-->
<!--STARTSECTION2--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 2/5</div>
      <h3>jQuery refresher</h3>
      <p>What the fuzz is about</p>
    </div>
  </section>
  <section class="slide" data-pos="7-2-1">
<span class="pos">7-2-1</span>
<div class="slidecontent"><div class="learn"></div>

<p>Learn the basics of <strong>jQuery</strong></p>
</div></section><section class="slide list" data-pos="7-2-2">
<span class="pos">7-2-2</span>
<div class="slidecontent">
<p>Let&#39;s see how some <strong>common tasks</strong> are done with jQuery:</p>
<ul>
<li><span>a</span>node references</li>
<li><span>b</span>node manipulation</li>
<li><span>c</span>node creation</li>
<li><span>d</span>event handling</li>
</ul>
</div></section><section class="slide num numA" data-pos="7-2-3">
<span class="pos">7-2-3</span>
<div class="slidecontent">
<p>We <strong>get node references</strong> by passing a <strong>CSS selector</strong> to the jQuery function:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// returns a jQuery collection of all elements matching that selector</span>
<span class="hljs-keyword">let</span> collection = jQuery(<span class="hljs-string">".someClass"</span>);
</code></pre>
</div></section><section class="slide" data-pos="7-2-4">
<span class="pos">7-2-4</span>
<div class="slidecontent"><p>You&#39;ll rarely see <code>jQuery</code> being used though, instead we work with the <code>$</code> alias:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> collection = $(<span class="hljs-string">".someClass"</span>);
</code></pre>
</div></section><section class="slide num numB" data-pos="7-2-5">
<span class="pos">7-2-5</span>
<div class="slidecontent">
<p>Here&#39;s some common <strong>manipulations</strong>:</p>
<pre><code class="lang-javascript">collection.html(<span class="hljs-string">"&lt;strong&gt;verboten&lt;/strong&gt;"</span>);
collection.text(<span class="hljs-string">"unavailable"</span>);
collection.addClass(<span class="hljs-string">"hide"</span>);
collection.attr(<span class="hljs-string">"data-ref"</span>,<span class="hljs-string">"Ek#AfZW2"</span>);
collection.empty(); <span class="hljs-comment">// killing all children</span>
</code></pre>
</div></section><section class="slide" data-pos="7-2-6">
<span class="pos">7-2-6</span>
<div class="slidecontent"><p>Note that unlike the DOM, jQuery <strong>doesn&#39;t have different methods</strong> for getting 1 or many nodes.</p>
<p>We can manipulate the resulting collection as if it was one node, and <strong>jQuery will do the changes to all nodes</strong>.</p>
</div></section><section class="slide" data-pos="7-2-7">
<span class="pos">7-2-7</span>
<div class="slidecontent"><p>That means that <strong>this regular JS</strong>...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> nodes = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">".french"</span>);
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> node <span class="hljs-keyword">in</span> nodes){
  node.innerHTML = <span class="hljs-string">"&lt;em&gt;click to translate&lt;/em&gt;"</span>;
}
</code></pre>
</div></section><section class="slide" data-pos="7-2-8">
<span class="pos">7-2-8</span>
<div class="slidecontent"><p>...can be done like this in jQuery:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> collection = $(<span class="hljs-string">".french"</span>);
collection.html(<span class="hljs-string">"&lt;em&gt;click to translate&lt;/em&gt;"</span>);
</code></pre>
<p>Commonly we skip the variable and <strong>chain</strong> instead:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">".french"</span>).html(<span class="hljs-string">"&lt;em&gt;click to translate&lt;/em&gt;"</span>);
</code></pre>
</div></section><section class="slide num numC" data-pos="7-2-9">
<span class="pos">7-2-9</span>
<div class="slidecontent">
<p>Now to see how we <strong>create new elements</strong> with jQuery!</p>
<p>Normally, if you <strong>pass a string</strong> to jQuery, it&#39;ll treat it as a <strong>CSS selector</strong> and collect all matching element:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> collection = $(<span class="hljs-string">".blogpost &gt; p:first-child"</span>);
</code></pre>
</div></section><section class="slide" data-pos="7-2-10">
<span class="pos">7-2-10</span>
<div class="slidecontent"><p>However, if we pass in a string containing HTML code, jQuery will instead <strong>create the matching element</strong>!</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> newCollection = $(<span class="hljs-string">"&lt;span&gt;"</span>);
</code></pre>
</div></section><section class="slide" data-pos="7-2-11">
<span class="pos">7-2-11</span>
<div class="slidecontent"><p>This HTML code can contain multiple elements as well as attributes:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> newCollection = $(<span class="hljs-string">`
  &lt;div class="container"&gt;
    &lt;h2&gt;Hello world!&lt;/h2&gt;
    &lt;p&gt;All this was created in a multiline string sent to jQuery!&lt;/p&gt;
  &lt;/div&gt;
`</span>);
</code></pre>
</div></section><section class="slide" data-pos="7-2-12">
<span class="pos">7-2-12</span>
<div class="slidecontent"><p>Then we can <strong>append the new node</strong>:</p>
<pre><code class="lang-javascript">$(selectorForParent).append(newCollection);
</code></pre>
<p>There&#39;s also a reversed syntax:</p>
<pre><code class="lang-javascript">newCollection.appendTo(selectorForParent);
</code></pre>
</div></section><section class="slide" data-pos="7-2-13">
<span class="pos">7-2-13</span>
<div class="slidecontent"><p>Of course we could have simply used the <code>.html</code> method:</p>
<pre><code class="lang-javascript">$(selectorForParent).html(stringWithNewHtml);
</code></pre>
</div></section><section class="slide num numD" data-pos="7-2-14">
<span class="pos">7-2-14</span>
<div class="slidecontent">
<p><strong>Event listeners</strong> are added using the <code>on</code> method:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">"#submitbtn"</span>).on(<span class="hljs-string">"click"</span>,handleSubmission);
</code></pre>
<p>Although it&#39;s common to use the <strong>event-specific shorthands</strong>:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">"#submitbtn"</span>).click(handleSubmission);
</code></pre>
</div></section>
</section>
<!--ENDSECTION2-->
<!--STARTSECTION3--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 3/5</div>
      <h3>Exercise - jQuery</h3>
      <p>Drinking the coolaid</p>
    </div>
  </section>
  <section class="slide" data-pos="7-3-1">
<span class="pos">7-3-1</span>
<div class="slidecontent"><div class="goal"></div>

<p>Practicing jQuery!</p>
</div></section><section class="slide" data-pos="7-3-2">
<span class="pos">7-3-2</span>
<div class="slidecontent"><p>Armed with a basic understanding of jQuery, we&#39;re now going to <strong>get started on their bootcamp</strong>!</p>
<p>It is an <strong>interactive tutorial</strong> somewhat reminiscent of the games we&#39;ve been playing with for other techniques.</p>
</div></section><section class="slide" data-pos="7-3-3">
<span class="pos">7-3-3</span>
<div class="slidecontent"><p>Go to <a href="http://try.jquery.com">http://try.jquery.com</a> and you&#39;ll see this:</p>
<p><img src="resources/images/tryjquery.png" alt=""></p>
</div></section><section class="slide" data-pos="7-3-4">
<span class="pos">7-3-4</span>
<div class="slidecontent"><p>Working through the screenshot top to bottom, a challenge consists of:</p>
<ul>
<li>an <strong>instruction up top</strong> telling you what to do</li>
<li><strong>rendered HTML code</strong> with currently selected elements highlighted</li>
<li>the <strong>HTML code</strong> that has been rendered</li>
<li>a <strong>console where you enter JS code</strong> and use jQuery</li>
</ul>
</div></section><section class="slide" data-pos="7-3-5">
<span class="pos">7-3-5</span>
<div class="slidecontent"><p>The tutorial does a good job of <strong>gradually introducing new concepts</strong> and <strong>ramping up difficulty</strong>.</p>
</div></section><section class="slide" data-pos="7-3-6">
<span class="pos">7-3-6</span>
<div class="slidecontent"><p>And as <strong>progress is saved</strong> between sessions, there is nothing to lose by <strong>getting started right now</strong>! Try it out for a bit so you get the hang of it, and finish it later if you want!</p>
</div></section><section class="slide" data-pos="7-3-7">
<span class="pos">7-3-7</span>
<div class="slidecontent"><div class="checklist"></div>

<p>You are done when...</p>
<ul>
<li>the time is up!</li>
</ul>
<p>You won&#39;t finish the bootcamp here - the goal is just to get you started!</p>
</div></section><section class="slide" data-pos="7-3-8">
<span class="pos">7-3-8</span>
<div class="slidecontent"><p>...<strong>OR</strong>...</p>
</div></section><section class="slide" data-pos="7-3-9">
<span class="pos">7-3-9</span>
<div class="slidecontent"><p>...you can try to <strong>refactor the guessing game</strong> to use jQuery instead!</p>
<p><strong>Plug in jQuery</strong> by throwing in this script element:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://code.jquery.com/jquery-3.3.1.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>...then use jQuery instead of <code>document</code>!</p>
</div></section><section class="slide" data-pos="7-3-10">
<span class="pos">7-3-10</span>
<div class="slidecontent"><div class="checklist"></div>

<p>You are done when...</p>
<ul>
<li>there is no mention of <code>document</code> in your code</li>
<li>the app still works!</li>
</ul>
</div></section>
</section>
<!--ENDSECTION3-->
<!--STARTSECTION4--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 4/5</div>
      <h3>Event delegation</h3>
      
    </div>
  </section>
  <section class="slide" data-pos="7-4-1">
<span class="pos">7-4-1</span>
<div class="slidecontent"><div class="learn"></div>

<p>Understanding event delegation and how to do it with jQuery</p>
</div></section><section class="slide" data-pos="7-4-2">
<span class="pos">7-4-2</span>
<div class="slidecontent"><p>jQuery also makes it very easy to do <strong>event delegation</strong>.</p>
<p>This is a powerful pattern that lets us <strong>listen to events on many elements</strong> - which <strong>might not even exist yet</strong> - using only a <strong>single event listener</strong>!</p>
</div></section><section class="slide" data-pos="7-4-3">
<span class="pos">7-4-3</span>
<div class="slidecontent"><p>We accomplish this by <strong>listening for the event on an ancestor element</strong>, and then letting the event <strong>bubble</strong> up to there from the element we&#39;re actually interested in.</p>
</div></section><section class="slide" data-pos="7-4-4">
<span class="pos">7-4-4</span>
<div class="slidecontent"><p>Consider an app with <strong>this UI</strong>:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">ui</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"options"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-option-id</span>=<span class="hljs-string">"gowest"</span>&gt;</span>Go west<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-option-id</span>=<span class="hljs-string">"opendoor"</span>&gt;</span>Open the door<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-option-id</span>=<span class="hljs-string">"turnback"</span>&gt;</span>Turn back<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<p>The contents of the <code>#options</code> list will change as the user clicks around.</p>
</div></section><section class="slide" data-pos="7-4-5">
<span class="pos">7-4-5</span>
<div class="slidecontent"><p>We could naively do this whenever we add an option:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">`&lt;li data-option-id="<span class="hljs-subst">${optId}</span>"&gt;<span class="hljs-subst">${optDesc}</span>&lt;/li&gt;`</span>)
  .click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{ gameEngine.executeOption(optId); })
  .appendTo(<span class="hljs-string">'#options'</span>);
</code></pre>
</div></section><section class="slide" data-pos="7-4-6">
<span class="pos">7-4-6</span>
<div class="slidecontent"><p>But! Instead of <strong>adding a listener everytime we create an option</strong>, we can have a <strong>single listener on the list</strong> which we <strong>filter to only handle clicks on options</strong>.</p>
</div></section><section class="slide" data-pos="7-4-7">
<span class="pos">7-4-7</span>
<div class="slidecontent"><p>In jQuery we do this by <strong>passing a filtering selector</strong> after the event name to <code>.on</code>:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">"#options"</span>).on(<span class="hljs-string">"click"</span>, <span class="hljs-string">"li"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
  <span class="hljs-keyword">let</span> opt = $(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">"data-option-id"</span>);
  gameEngine.executeOption(opt);
});
</code></pre>
<p>Inside the handler <code>this</code> is the element matching the selector.</p>
</div></section><section class="slide" data-pos="7-4-8">
<span class="pos">7-4-8</span>
<div class="slidecontent"><p>Now, when we add new stuff to the list, we don&#39;t need a new listener!</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">`&lt;li data-option-id="<span class="hljs-subst">${optId}</span>"&gt;<span class="hljs-subst">${optDesc}</span>&lt;/li&gt;`</span>)
  .appendTo(<span class="hljs-string">'#options'</span>);
</code></pre>
</div></section><section class="slide" data-pos="7-4-9">
<span class="pos">7-4-9</span>
<div class="slidecontent"><p>Event delegation is of course <strong>possible without jQuery</strong>.</p>
<p>But jQuery both..</p>
<ul>
<li>popularised the pattern</li>
<li>made it much easier to use</li>
</ul>
</div></section>
</section>
<!--ENDSECTION4-->
<!--STARTSECTION5--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 5/5</div>
      <h3>Exercise - ToDo app</h3>
      <p>Because it&#39;s NEVER been done before</p>
    </div>
  </section>
  <section class="slide" data-pos="7-5-1">
<span class="pos">7-5-1</span>
<div class="slidecontent"><div class="goal"></div>

<p>Practicing more jQuery, and event delegation</p>
</div></section><section class="slide" data-pos="7-5-2">
<span class="pos">7-5-2</span>
<div class="slidecontent"><p>Let&#39;s build a <strong>list application</strong>! Users should be able to...</p>
<ul>
<li>add items</li>
<li>remove items</li>
<li>mark items as done</li>
<li>clear all done items</li>
</ul>
</div></section><section class="slide" data-pos="7-5-3">
<span class="pos">7-5-3</span>
<div class="slidecontent"><p>Here it is in action:</p>
<p><img src="resources/images/todoanim.gif" alt=""></p>
</div></section><section class="slide list" data-pos="7-5-4">
<span class="pos">7-5-4</span>
<div class="slidecontent">
<p>Here&#39;s a battleplan:</p>
<ul>
<li><span>a</span>Set up the HTML document</li>
<li><span>b</span>Set up the app state</li>
<li><span>c</span>Make a render function</li>
<li><span>d</span>Implement adding items</li>
<li><span>e</span>Implement removing items</li>
<li><span>f</span>Implement toggling items</li>
<li><span>g</span>Implement clearing all done items</li>
</ul>
</div></section><section class="slide num numA" data-pos="7-5-5">
<span class="pos">7-5-5</span>
<div class="slidecontent">
<p>First we have to <strong>set up the document</strong>.</p>
<p>Create a new HTML document, with separate CSS and JS files if you wish.</p>
</div></section><section class="slide" data-pos="7-5-6">
<span class="pos">7-5-6</span>
<div class="slidecontent"><p><strong>Bring jQuery into the project</strong> via a script element in <code>index.html</code> referencing the <strong>CDN version</strong>:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://code.jquery.com/jquery-3.3.1.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>Remember to put this <strong>before your code</strong>, otherwise jQuery won&#39;t exist when you run it!</p>
</div></section><section class="slide" data-pos="7-5-7">
<span class="pos">7-5-7</span>
<div class="slidecontent"><p>The HTML I chose to use looked like this:</p>
<pre><code class="lang-html">  <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"field"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Add"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"list"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"clear"</span>&gt;</span>Clear all done<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
</div></section><section class="slide num numB" data-pos="7-5-8">
<span class="pos">7-5-8</span>
<div class="slidecontent">
<p>A good beginning is often to decide the shape of our <strong>app state</strong>. In our case, an <strong>array of items</strong>!</p>
<p>But what should a <strong>single item</strong> look like? I wen&#39;t for this:</p>
<pre><code class="lang-javascript">{<span class="hljs-attr">text</span>: <span class="hljs-string">"Ta ut soporna"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>}
</code></pre>
</div></section><section class="slide" data-pos="7-5-9">
<span class="pos">7-5-9</span>
<div class="slidecontent"><p>Create a <strong>global state variable</strong> and <strong>initialise it</strong> with an item or two:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> myItems = [
  {<span class="hljs-attr">text</span>: <span class="hljs-string">"Make the bed"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>},
  {<span class="hljs-attr">text</span>: <span class="hljs-string">"Take out the trash"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span>}
];
</code></pre>
</div></section><section class="slide num numC" data-pos="7-5-10">
<span class="pos">7-5-10</span>
<div class="slidecontent">
<p>Next up, let&#39;s add a <strong>render</strong> function!</p>
<p>It should...</p>
<ul>
<li>take the array of items as an argument</li>
<li>loop over that to create a chunk of HTML</li>
<li>put that HTML inside the <code>ul</code> element</li>
</ul>
</div></section><section class="slide" data-pos="7-5-11">
<span class="pos">7-5-11</span>
<div class="slidecontent"><p>I chose to represent an item with this HTML (where <code>i</code> is the index of the item):</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> itemHTML = <span class="hljs-string">`
  &lt;li data-pos="<span class="hljs-subst">${i}</span>" class="<span class="hljs-subst">${items[i].done ? <span class="hljs-string">'done'</span> : <span class="hljs-string">''</span>}</span>"&gt;
    &lt;span class="toggle"&gt;<span class="hljs-subst">${items[i].text}</span>&lt;/span&gt;
    &lt;button class="delete"&gt;X&lt;/button&gt;
  &lt;/li&gt;
`</span>;
</code></pre>
<p>Note how I used the ternary operator to maybe add the CSS class <code>done</code>.</p>
</div></section><section class="slide" data-pos="7-5-12">
<span class="pos">7-5-12</span>
<div class="slidecontent"><p>For the <code>done</code> class I have the following CSS...</p>
<pre><code><span class="hljs-selector-class">.done</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#DDD</span>;
  <span class="hljs-attribute">text-decoration</span>: line-through;
}
</code></pre><p>...but you can probably figure out something nicer :)</p>
</div></section><section class="slide" data-pos="7-5-13">
<span class="pos">7-5-13</span>
<div class="slidecontent"><p>Finally, add an initial call to render at the bottom of your code:</p>
<pre><code class="lang-javascript">render(myItems);
</code></pre>
<p>Test your app to see if it works!</p>
</div></section><section class="slide num numD" data-pos="7-5-14">
<span class="pos">7-5-14</span>
<div class="slidecontent">
<p>Time to implement the <strong>adding of items</strong>!</p>
</div></section><section class="slide" data-pos="7-5-15">
<span class="pos">7-5-15</span>
<div class="slidecontent"><p>As you saw earlier I had this HTML for the part where the user adds an item:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"field"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Add"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
</div></section><section class="slide question" data-pos="7-5-16">
<span class="pos">7-5-16</span>
<div class="slidecontent">
<p>What&#39;s up with that? What is a submit type input, and what is a form? Why not use just a field and a normal button?</p>
</div></section><section class="slide answer" data-pos="7-5-17">
<span class="pos">7-5-17</span>
<div class="slidecontent">
<p>Because using a form allows me to easily use Enter hits as well as button clicks! You see;</p>
<ul>
<li>a <strong>form</strong> can have a <strong><code>submit</code></strong> event triggered</li>
<li>the <strong>submit type input</strong> is a button that will <strong>trigger</strong> it</li>
<li>but it is also <strong>triggered by all enter hits</strong> in inputs inside the form!</li>
</ul>
</div></section><section class="slide" data-pos="7-5-18">
<span class="pos">7-5-18</span>
<div class="slidecontent"><p>That means we don&#39;t have to listen for enter hits in the field or button clicks on the add button - it is enough to just listen to <strong><code>submit</code> events</strong> on the form!</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">"form"</span>).submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
  <span class="hljs-comment">// code to add element in here</span>
});
</code></pre>
</div></section><section class="slide" data-pos="7-5-19">
<span class="pos">7-5-19</span>
<div class="slidecontent"><p>However! The <strong>default behaviour for a submit event</strong> is to make a call to a server and <strong>reload the page</strong>.</p>
<p>We don&#39;t want that, which is why we need to do this inside the submit event handler:</p>
<pre><code class="lang-javascript">e.preventDefault();
</code></pre>
</div></section><section class="slide num numE" data-pos="7-5-20">
<span class="pos">7-5-20</span>
<div class="slidecontent">
<p>Now for the <strong>removal</strong> of individual items! Did you notice the Remove button in the item HTML earlier?</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> itemHTML = <span class="hljs-string">`
  &lt;li data-pos="<span class="hljs-subst">${i}</span>" class="<span class="hljs-subst">${items[i].done ? <span class="hljs-string">'done'</span> : <span class="hljs-string">''</span>}</span>"&gt;
    &lt;span class="toggle"&gt;<span class="hljs-subst">${items[i].text}</span>&lt;/span&gt;
    &lt;button class="delete"&gt;X&lt;/button&gt;
  &lt;/li&gt;
`</span>;
</code></pre>
</div></section><section class="slide" data-pos="7-5-21">
<span class="pos">7-5-21</span>
<div class="slidecontent"><p>We&#39;ll now add a handler to all those buttons using <strong>event delegation</strong>! Simply <strong>target the <code>ul</code></strong> and use the event delegation syntax:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">'#list'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'.delete'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-comment">// code to remove the clicked item</span>
});
</code></pre>
</div></section><section class="slide question" data-pos="7-5-22">
<span class="pos">7-5-22</span>
<div class="slidecontent">
<p>But, how do we know <strong>which item to remove</strong>?</p>
</div></section><section class="slide answer" data-pos="7-5-23">
<span class="pos">7-5-23</span>
<div class="slidecontent">
<p>That information is in the <strong><code>data-pos</code> attribute of the parent</strong> <code>li</code> element. Inside the handler, we can access that like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> pos = $(<span class="hljs-keyword">this</span>) <span class="hljs-comment">// inside event delegation handlers, `this` is the matching element</span>
  .closest(<span class="hljs-string">'li'</span>) <span class="hljs-comment">// walk towards the root finding the first element to match 'li'</span>
  .attr(<span class="hljs-string">'data-pos'</span>); <span class="hljs-comment">// the value of the data-pos attribute! :)</span>
</code></pre>
</div></section><section class="slide question" data-pos="7-5-24">
<span class="pos">7-5-24</span>
<div class="slidecontent">
<p>Ok, but after that, how do I <strong>remove an item from an array</strong> at a given index?</p>
</div></section><section class="slide answer" data-pos="7-5-25">
<span class="pos">7-5-25</span>
<div class="slidecontent">
<p>You use the <strong>splice method</strong>.</p>
<p>I won&#39;t hold your hand here; instead check out the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice">MDN docs for splice</a>!</p>
</div></section><section class="slide" data-pos="7-5-26">
<span class="pos">7-5-26</span>
<div class="slidecontent"><p>Finally, after you&#39;ve manipulated the array, <strong>call the render method</strong> with the new list!</p>
</div></section><section class="slide num numF" data-pos="7-5-27">
<span class="pos">7-5-27</span>
<div class="slidecontent">
<p>Time to implement the <strong>toggling of items</strong>!</p>
</div></section><section class="slide" data-pos="7-5-28">
<span class="pos">7-5-28</span>
<div class="slidecontent"><p>This will work <strong>very similarly to the removal</strong>;</p>
<ul>
<li>catch clicks on <code>.toggle</code> with event delegation</li>
<li>figure out which index item was clicked</li>
<li>toggle the <code>.done</code> prop of the correct item</li>
<li>rerender the list</li>
</ul>
</div></section><section class="slide num numG" data-pos="7-5-29">
<span class="pos">7-5-29</span>
<div class="slidecontent">
<p>The very last thing is to add a <strong>Clear all done items</strong> button! You need to:</p>
<ul>
<li>add an event listener (not delegation) to the button</li>
<li>inside the handler we must<ul>
<li>remove all done items (probably don&#39;t want splice for this!)</li>
<li>rerender</li>
</ul>
</li>
</ul>
</div></section><section class="slide" data-pos="7-5-30">
<span class="pos">7-5-30</span>
<div class="slidecontent"><div class="checklist"></div>

<p>You are done when...</p>
<ul>
<li>the initial list items are rendered</li>
<li>new items can be added</li>
<li>items can be deleted</li>
<li>items can be toggled</li>
<li>all completed items can be purged</li>
</ul>
<p>...but it is ok if you don&#39;t manage all of it!</p>
</div></section><section class="slide challenge" data-pos="7-5-31">
<span class="pos">7-5-31</span>
<div class="slidecontent">
<p>See if you can purify some of the code, in line with the earlier architectural reasonings! :)</p>
</div></section>
</section>
<!--ENDSECTION5--><!--ENDCHAPTERCONTENT-->
        

      </div>
    </div>

    <script type="text/javascript">
      var basehref = window.location.href.replace(/chapter\d.*?$/,'')

      document.addEventListener("keydown",function(e){
        var code = e.which || e.keyCode;
        if (code===13){
          window.location.href = basehref+"index.html?from="+(7-1);
        } else if (code >= 49 && code <= 5+48) {
          window.location.hash = "#/" + (code-48+1+1);
        }
        if (7 < 11) {
          if (code===99){ // the letter C for next Chapter
            window.location.href = basehref+"chapter"+(7+1)+".html"
          }
        }
      });
    </script>
    <script src="mc2/scripts/head.js" type="text/javascript"></script>
    <script src="mc2/scripts/reveal.js" type="text/javascript"></script>
    <script src="mc2/scripts/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">

  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,
    showNotes: false,
    transition: 'slide',
    dependencies: [
      { src: 'mc2/scripts/plugin/notes/notes.js', async: true }
    ]
  })

    window.onload = function(){

      var links = document.querySelectorAll("a.link");
      for(var i=0;i<links.length;i++){
        var link = links[i];
        link.innerHTML = link.innerHTML.replace(/ /g,'&nbsp;')
      }
      var posElem = document.getElementById('pos')
      function updateReference(){
        setTimeout(function(){
          var currentpos = document.querySelector('section.present[data-pos]')
          if (currentpos){
            posElem.innerHTML = currentpos.getAttribute('data-pos')
          } else {
            posElem.innerHTML = ''
          }
          if (document.querySelector('.present.chaptertitle')){
            document.body.classList.add('atchaptertitle');
          } else {
            document.body.classList.remove('atchaptertitle');
          }
        },10)
      }

      window.addEventListener("hashchange",updateReference);

      updateReference();
    };

    </script>
    <!--STARTCOURSESPECIFICSCRIPTS--><script type="text/javascript" src="scripts/cssdemo.js"></script>
<script type="text/javascript" src="scripts/scoped_polyfill.js"></script><!--ENDCOURSESPECIFICSCRIPTS-->
  </body>
</html>
